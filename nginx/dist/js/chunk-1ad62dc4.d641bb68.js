(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ad62dc4"],{"30f4":function(e,t,n){"use strict";n("fb05")},"7abe":function(e,t,n){"use strict";n.r(t);n("b0c0");var r=n("7a23"),u=function(e){return Object(r["L"])("data-v-01ad3b2c"),e=e(),Object(r["J"])(),e},c={class:"home-page"},o=Object(r["p"])("Login"),i=u((function(){return Object(r["n"])("div",{class:"card-header"},[Object(r["n"])("span",null,"User Info")],-1)})),l={class:"text item"},s={class:"info-item"},a=u((function(){return Object(r["n"])("span",null,"Name:",-1)})),b={class:"text item"},d={class:"info-item"},f=u((function(){return Object(r["n"])("span",null,"Certify Code:",-1)})),O={class:"card-header"},j=u((function(){return Object(r["n"])("span",null,"Dorm Status",-1)})),m=Object(r["p"])("Refresh"),p={key:0},g={class:"no-dorm-tips"},h=u((function(){return Object(r["n"])("p",null,"未查到您的宿舍信息，请选择宿舍 或 刷新信息",-1)})),I=Object(r["p"])("Refresh"),v={class:"selection-container box-card"},C=Object(r["p"])("前往注册"),_=Object(r["p"])("提 交"),y={key:1};function k(e,t,n,u,k,V){var F=Object(r["R"])("el-link"),S=Object(r["R"])("el-button"),R=Object(r["R"])("el-card"),q=Object(r["R"])("el-option"),w=Object(r["R"])("el-select"),N=Object(r["R"])("el-form-item"),x=Object(r["R"])("el-input-number"),U=Object(r["R"])("el-input"),D=Object(r["R"])("el-form");return Object(r["I"])(),Object(r["m"])("div",c,[Object(r["n"])("h1",null,Object(r["V"])(e.title),1),Object(r["q"])(F,{onClick:V.loginOut,type:"success"},{default:Object(r["gb"])((function(){return[o]})),_:1},8,["onClick"]),Object(r["q"])(R,{class:"box-card",shadow:"hover"},{header:Object(r["gb"])((function(){return[i]})),default:Object(r["gb"])((function(){return[Object(r["n"])("div",l,[Object(r["n"])("div",s,[a,Object(r["n"])("span",null,Object(r["V"])(e.userInfo.name),1)])]),Object(r["n"])("div",b,[Object(r["n"])("div",d,[f,Object(r["n"])("span",null,Object(r["V"])(e.userInfo.certify_code),1)]),Object(r["q"])(S,{onClick:V.updateCertifyCode},{default:Object(r["gb"])((function(){return[Object(r["p"])(Object(r["V"])(""===e.userInfo.certify_code?"Generate Certify Code":"Update Certify Code"),1)]})),_:1},8,["onClick"])])]})),_:1}),Object(r["q"])(R,{class:"box-card",shadow:"hover"},{header:Object(r["gb"])((function(){return[Object(r["n"])("div",O,[j,Object(r["q"])(S,{onClick:V.fetchBuildingsStatus,class:"button",type:"primary"},{default:Object(r["gb"])((function(){return[m]})),_:1},8,["onClick"])])]})),default:Object(r["gb"])((function(){return[(Object(r["I"])(!0),Object(r["m"])(r["b"],null,Object(r["P"])(e.buildingsStatus,(function(e){return Object(r["I"])(),Object(r["m"])("div",{key:e,class:"text item"},Object(r["V"])(e.building_name)+": Female "+Object(r["V"])(e.female_available)+"/"+Object(r["V"])(e.female_total)+". Male "+Object(r["V"])(e.male_available)+"/"+Object(r["V"])(e.male_total),1)})),128))]})),_:1}),void 0===e.userDormInfo.roomId?(Object(r["I"])(),Object(r["m"])("div",p,[Object(r["n"])("div",g,[h,Object(r["q"])(S,{onClick:V.getUser2RoomInfo},{default:Object(r["gb"])((function(){return[I]})),_:1},8,["onClick"])]),Object(r["n"])("div",v,[Object(r["q"])(D,{ref:"selectionForm",model:e.selectionForm,rules:e.rules,onKeyup:Object(r["ib"])(V.submitForm,["enter"])},{default:Object(r["gb"])((function(){return[Object(r["q"])(N,{label:"Building",prop:e.buildingId},{default:Object(r["gb"])((function(){return[Object(r["q"])(w,{modelValue:e.selectionForm.buildingId,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.selectionForm.buildingId=t}),placeholder:"Select Building"},{default:Object(r["gb"])((function(){return[(Object(r["I"])(!0),Object(r["m"])(r["b"],null,Object(r["P"])(e.buildingsStatus,(function(e){return Object(r["I"])(),Object(r["k"])(q,{key:e.building_id,label:e.building_name,value:e.building_id},{default:Object(r["gb"])((function(){return[Object(r["n"])("span",null,Object(r["V"])(e.building_name),1)]})),_:2},1032,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1},8,["prop"]),Object(r["q"])(N,{label:"Nums",prop:e.usersNum},{default:Object(r["gb"])((function(){return[Object(r["q"])(x,{modelValue:e.selectionForm.usersNum,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectionForm.usersNum=t}),min:1,max:4,onChange:V.handleNumChange},null,8,["modelValue","onChange"])]})),_:1},8,["prop"]),(Object(r["I"])(!0),Object(r["m"])(r["b"],null,Object(r["P"])(e.selectionForm.users,(function(e,t){return Object(r["I"])(),Object(r["m"])("div",{key:e.userId},[Object(r["q"])(N,{label:"Student "+t+" ID:",prop:e.userStudentId},{default:Object(r["gb"])((function(){return[Object(r["q"])(U,{disabled:0===t,modelValue:e.userStudentId,"onUpdate:modelValue":function(t){return e.userStudentId=t}},null,8,["disabled","modelValue","onUpdate:modelValue"])]})),_:2},1032,["label","prop"]),Object(r["q"])(N,{label:"Student "+t+" Certify Code:",prop:e.userCertifyCode},{default:Object(r["gb"])((function(){return[Object(r["q"])(U,{disabled:0===t,modelValue:e.userCertifyCode,"onUpdate:modelValue":function(t){return e.userCertifyCode=t}},null,8,["disabled","modelValue","onUpdate:modelValue"])]})),_:2},1032,["label","prop"])])})),128)),Object(r["q"])(N,null,{default:Object(r["gb"])((function(){return[Object(r["q"])(S,{type:"primary",style:{width:"46%"},onClick:e.toRegister},{default:Object(r["gb"])((function(){return[C]})),_:1},8,["onClick"]),Object(r["q"])(S,{type:"primary",style:{width:"46%","margin-left":"8%"},onClick:V.submitForm},{default:Object(r["gb"])((function(){return[_]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["model","rules","onKeyup"])])])):(Object(r["I"])(),Object(r["m"])("div",y,"你的宿舍是"+Object(r["V"])(e.userDormInfo.roomId),1))])}var V=n("1da1"),F=n("5530"),S=(n("96cf"),n("6c02")),R=n("4360"),q=n("c24f"),w=n("b775"),N=function(){return Object(w["a"])({url:"/buildingsStatus",method:"get"})},x=function(){return Object(w["a"])({url:"/user2RoomInfo",method:"get"})},U=function(e){return Object(w["a"])({url:"/bookOrder",method:"post",data:e})},D=n("5502"),B={data:function(){return{title:"Home",userInfo:{id:1,name:"John",certify_code:"12345678"},buildingsStatus:[{id:1,building_name:"Building 1",female_available:1,female_total:10,male_available:10,male_total:20}],userDormInfo:{},selectionForm:{buildingId:"",users:[{userId:Object(r["N"])(""),userStudentId:Object(r["N"])(""),userCertifyCode:Object(r["N"])("")}],usersNum:1},rules:{}}},methods:Object(F["a"])(Object(F["a"])({},Object(D["b"])("user",["LoginOut"])),{},{loginOut:function(){var e=this;return Object(V["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.LoginOut();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},updateCertifyCode:function(){var e=this;Object(q["e"])().then((function(t){e.userInfo.certify_code=t.data.certifyCode}))},fetchBuildingsStatus:function(){var e=this;N().then((function(t){e.buildingsStatus=t.data}))},getUser2RoomInfo:function(){var e=this;x().then((function(t){console.log(t),e.userDormInfo=t.data.userDormInfo}))},handleNumChange:function(e){var t=e-this.selectionForm.users.length;if(console.log(t),t>0)for(var n=0;n<t;n++)this.selectionForm.users.push({userId:Object(r["N"])(""),userStudentId:Object(r["N"])(""),userCertifyCode:Object(r["N"])("")});else for(var u=0;u<-t;u++)this.selectionForm.users.pop()},submitForm:function(){var e=this;this.$refs.selectionForm.validate(function(){var t=Object(V["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}return t.next=3,e.bookOrder();case 3:void 0===e.userDormInfo.roomId?e.$message.error("请选择宿舍"):e.$message.success("提交成功");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},bookOrder:function(){var e=this,t=this.selectionForm,n=t.buildingId,r=t.users,u=t.usersNum,c={buildingId:n,users:r,usersNum:u,gender:e.userInfo.gender};U(c).then((function(e){console.log(e)}))}}),setup:function(){var e=Object(S["c"])(),t=function(){e.push("/login")};return{toLogin:t}},mounted:function(){this.userInfo=R["a"].getters["user/userInfo"],this.fetchBuildingsStatus(),this.getUser2RoomInfo(),this.selectionForm.users[0].userId=this.userInfo.id,this.selectionForm.users[0].userStudentId=this.userInfo.student_id,this.selectionForm.users[0].userCertifyCode=this.userInfo.certify_code}},L=(n("30f4"),n("6b0d")),J=n.n(L);const P=J()(B,[["render",k],["__scopeId","data-v-01ad3b2c"]]);t["default"]=P},b0c0:function(e,t,n){var r=n("83ab"),u=n("5e77").EXISTS,c=n("e330"),o=n("9bf2").f,i=Function.prototype,l=c(i.toString),s=/^\s*function ([^ (]*)/,a=c(s.exec),b="name";r&&!u&&o(i,b,{configurable:!0,get:function(){try{return a(s,l(this))[1]}catch(e){return""}}})},fb05:function(e,t,n){}}]);
//# sourceMappingURL=chunk-1ad62dc4.d641bb68.js.map